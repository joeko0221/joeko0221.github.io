---
layout: post
author: Joe Ko
title: k8s 安裝 (docker, containerd, cri-o)
date: 2022-01-04 14:20 +0800
categories:
- k8s
tags:
- docker
toc:  true
---

k8s 即將移除預設的 dockershim，除了 docker，還有其他 CRI 可以替代，

本文將在 CentOS7 上，安裝三種 k8s cluster (如下)，安裝過程只有 CRI 部份不同。

- k8s + docker
- k8s + containerd
- k8s + cri-o

## 設定 iptables
{% highlight linux linenos %}
cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
br_netfilter
EOF

cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF

sudo sysctl --system
{% endhighlight %}

-----
